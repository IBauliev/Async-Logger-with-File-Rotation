# **Async Logger with File Rotation**  

**–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä —Å —Ä–æ—Ç–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π**  

–õ–æ–≥–≥–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ñ–∞–π–ª—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`INFO`, `WARNING`, `ERROR`), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ.  

## **üìå –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**  
‚úî **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å** ‚Äì –∑–∞–ø–∏—Å—å –ª–æ–≥–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ.  
‚úî **–†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤** ‚Äì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞.  
‚úî **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äì –≤—ã–≤–æ–¥ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ `ERROR`).  
‚úî **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ JSON** ‚Äì –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–∏, —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ –∏ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.  
‚úî **STL –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫** ‚Äì —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ C++17 (`<filesystem>`, `<thread>`, `<mutex>`).  

---

## **üöÄ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫**  

### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**  
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++17 (`g++`, `clang`, MSVC).  
- CMake (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–¥–æ–±–Ω–æ–π —Å–±–æ—Ä–∫–∏).  

### **–°–±–æ—Ä–∫–∞ –≤—Ä—É—á–Ω—É—é**  
```sh
g++ -std=c++17 -pthread logger.cpp main.cpp -o logger
./logger
```

### **–°–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ CMake**  
1. –°–æ–∑–¥–∞–π—Ç–µ `CMakeLists.txt`:  
```cmake
cmake_minimum_required(VERSION 3.10)
project(AsyncLogger)

set(CMAKE_CXX_STANDARD 17)

add_executable(logger logger.cpp main.cpp)
target_link_libraries(logger pthread)
```

2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:  
```sh
mkdir build && cd build
cmake ..
make
./logger
```

---

## **‚öô –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**  
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `logger_config.json` –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:  
```json
{
    "logDir": "logs",
    "maxFileSize": 1048576,
    "minLogLevel": "INFO"
}
```
- `logDir` ‚Äì –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).  
- `maxFileSize` ‚Äì –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 –ú–ë).  
- `minLogLevel` ‚Äì –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`INFO`, `WARNING`, `ERROR`).  

---

## **üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**  
```cpp
#include "logger.h"
#include <thread>

int main() {
    Logger logger("logger_config.json");

    logger.log(LogLevel::INFO, "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ");
    logger.log(LogLevel::WARNING, "–ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏");
    logger.log(LogLevel::ERROR, "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î");

    // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    std::this_thread::sleep_for(std::chrono::seconds(1));

    logger.stop(); // –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    return 0;
}
```

---

## **üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**  
```
‚îú‚îÄ‚îÄ CMakeLists.txt          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CMake
‚îú‚îÄ‚îÄ logger_config.json      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–≥–µ—Ä–∞
‚îú‚îÄ‚îÄ logger.h                # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ logger.cpp              # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
‚îî‚îÄ‚îÄ main.cpp                # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

---

## **üìå –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**  
üîπ **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã** (Google Test).  
üîπ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π JSON-–ø–∞—Ä—Å–∏–Ω–≥** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `nlohmann/json`).  
üîπ **–î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ç–µ–≤—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –ª–æ–≥–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ UDP/TCP).  
üîπ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode** (–¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –∏ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤).  
